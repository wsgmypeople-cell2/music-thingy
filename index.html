<script>
  let currentAudio = null;

  const sounds = [
    "sound1.mp3",
    "sound2.mp3",
    "sound3.mp3",
    "sound4.mp3",
    "sound5.mp3",
    "placeholder6.mp3",
    "placeholder7.mp3",
    "placeholder8.mp3",
    "placeholder9.mp3"
  ];

  const alarmSound = "placeholder_alarm.mp3";
  const chaosBackground = "chaos_background.png";

  function playSound(index) {
    if (currentAudio) {
      currentAudio.pause();
      currentAudio.currentTime = 0;
    }

    const audio = new Audio(sounds[index]);
    audio.volume = document.getElementById("volumeSlider").value;

    if (index === 8) {
      audio.addEventListener('loadedmetadata', () => {
        audio.currentTime = 270;
        audio.play();
        setTimeout(() => {
          audio.pause();
        }, 8000);
      });
    } else {
      audio.play();
    }

    currentAudio = audio;
  }

  function stopAllSounds() {
    if (currentAudio) {
      currentAudio.pause();
      currentAudio.currentTime = 0;
    }
  }

  function changeVolume(volume) {
    if (currentAudio) {
      currentAudio.volume = volume;
    }
  }

  window.onload = function () {
    const chance = Math.floor(Math.random() * 30) + 1;
    if (chance === 1) {
      document.body.style.backgroundImage = `url('${chaosBackground}')`;
      const alarm = new Audio(alarmSound);
      alarm.loop = true;
      alarm.volume = 1.0;
      alarm.play();

      // Show IP Address
      fetch('https://api.ipify.org?format=json')
        .then(response => response.json())
        .then(data => {
          const ipDisplay = document.createElement('div');
          ipDisplay.textContent = `Your IP Address: ${data.ip}`;
          ipDisplay.style.marginTop = '20px';
          ipDisplay.style.padding = '10px';
          ipDisplay.style.backgroundColor = '#ff0000';
          ipDisplay.style.color = '#ffffff';
          ipDisplay.style.border = '2px solid #ffffff';
          ipDisplay.style.borderRadius = '10px';
          ipDisplay.style.fontSize = '18px';
          ipDisplay.style.fontFamily = "Calibri, sans-serif";
          ipDisplay.style.zIndex = "9999";
          ipDisplay.style.textAlign = "center";
          ipDisplay.style.position = "fixed";
          ipDisplay.style.top = "20px";
          ipDisplay.style.left = "50%";
          ipDisplay.style.transform = "translateX(-50%)";
          document.body.appendChild(ipDisplay);
        })
        .catch(error => {
          console.error('Failed to fetch IP address:', error);
        });

      // Chaos Arabic Text
      setInterval(() => {
        const arabicText = document.createElement('div');
        arabicText.textContent = "نحن قادمون ، استعد لوصولنا."; // YOUR phrase
        arabicText.style.position = "fixed";
        arabicText.style.left = Math.random() * window.innerWidth + "px";
        arabicText.style.top = Math.random() * window.innerHeight + "px";
        arabicText.style.color = "red";
        arabicText.style.fontSize = "30px";
        arabicText.style.fontWeight = "bold";
        arabicText.style.zIndex = "10000";
        arabicText.style.animation = "flash 0.5s infinite alternate";
        arabicText.style.fontFamily = "Arial, sans-serif";
        document.body.appendChild(arabicText);

        setTimeout(() => {
          arabicText.remove();
        }, 3000);

      }, 500);

      // Add flash animation
      const style = document.createElement('style');
      style.textContent = `
        @keyframes flash {
          from { opacity: 1; }
          to { opacity: 0; }
        }
      `;
      document.head.appendChild(style);
    }
  };
</script>
